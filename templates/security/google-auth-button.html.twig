<div class="google-auth-container">
    <div class="placeholder" style="{% if not showButton %}display: block;{% else %}display: none;{% endif %} background-color: #f8f9fa; padding: 20px; text-align: center; border-radius: 8px; margin-bottom: 15px; color: #333;">
        <p style="margin-bottom: 15px; color: #333; font-weight: 500;">Pour vous connecter avec Google, veuillez accepter les cookies fonctionnels</p>
        <button class="enable-functional-cookies" style="padding: 10px 18px; background: transparent; color: #4285F4; border: 2px solid #4285F4; border-radius: 4px; cursor: pointer; font-weight: 500; transition: all 0.2s ease; display: inline-block; text-align: center; font-size: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">Activer les cookies fonctionnels</button>
    </div>
    
    <div class="auth-button" style="{% if showButton %}display: block;{% else %}display: none;{% endif %}">
        <a href="{{ path('connect_google') }}" class="btn btn-primary">
            <i class="fab fa-google me-2"></i> Se connecter avec Google
        </a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Vérifier si les cookies fonctionnels sont activés
    var functionalAllowed = document.cookie.indexOf('cookie_functional=true') !== -1;
    
    document.querySelectorAll('.google-auth-container').forEach(function(container) {
        var placeholder = container.querySelector('.placeholder');
        var authButton = container.querySelector('.auth-button');
        
        if (functionalAllowed) {
            placeholder.style.display = 'none';
            authButton.style.display = 'block';
        } else {
            placeholder.style.display = 'block';
            authButton.style.display = 'none';
        }
    });
    
    // Gestionnaire pour activer les cookies fonctionnels
    document.querySelectorAll('.enable-functional-cookies').forEach(function(button) {
        button.addEventListener('click', function() {
            document.cookie = "cookie_functional=true;path=/;max-age=31536000";
            window.location.reload();
        });
    });
});
</script>